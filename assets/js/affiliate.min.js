function setCookie(e,t,n){var r=new Date;r.setTime(r.getTime()+n*24*60*60*1e3);var i="expires="+r.toUTCString();document.cookie=e+"="+t+"; "+i}function getCookie(e){var t=e+"=";var n=document.cookie.split(";");for(var r=0;r<n.length;r++){var i=n[r];while(i.charAt(0)==" ")i=i.substring(1);if(i.indexOf(t)!=-1)return i.substring(t.length,i.length)}return""}function imacoach_loadExternalJS(e){var t=window.ActiveXObject?new ActiveXObject("Microsoft.XMLHTTP"):new XMLHttpRequest;t.open("GET",e,false);t.send(null);var n=t.responseText;var r=document.createElement("script");try{r.appendChild(document.createTextNode(n));document.body.appendChild(r)}catch(i){r.text=n;document.getElementsByTagName("head")[0].appendChild(r)}t=null}function imacoach_init(){if(typeof jQuery==="undefined"){imacoach_loadExternalJS("//ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js")}$(function(){$(".imacoach-affiliate-update").each(function(){key=$(this).attr("data-affiliate-key");affiliate=imacoach_QueryString[key];if(affiliate!=""&&typeof affiliate!="undefined")setCookie("affiliate",affiliate,90);if($.trim(getCookie("affiliate"))!="")affiliate=getCookie("affiliate");console.log(getCookie("affiliate"));if($.trim(getCookie("affiliate"))=="")return;if($(this).attr("href").indexOf("?")==-1){$(this).attr("href",$(this).attr("href")+"?a="+affiliate)}else{if($(this).attr("href").indexOf("a=")==-1){$(this).attr("href",$(this).attr("href")+"&a="+affiliate)}else{if($(this).attr("href").indexOf("?a=")==-1){url=$(this).attr("href").split("&a=");if(url[1].indexOf("&")==-1){url[1]=affiliate;url=url[0]+"&a="+url[1];$(this).attr("href",url)}else{console.log(url[1]);subURL=url[1].split("&");subURL[0]=affiliate;url[1]=subURL.join("&");url=url[0]+"&a="+url[1];$(this).attr("href",url)}}else{url=$(this).attr("href").split("?a=");subURL=url[1].split("&");subURL[0]=affiliate;url[1]=subURL.join("&");url=url[0]+"?a="+url[1];$(this).attr("href",url)}}}})})}var imacoach_QueryString=function(){var e={};var t=window.location.search.substring(1);var n=t.split("&");for(var r=0;r<n.length;r++){var i=n[r].split("=");if(typeof e[i[0]]==="undefined"){e[i[0]]=i[1]}else if(typeof e[i[0]]==="string"){var s=[e[i[0]],i[1]];e[i[0]]=s}else{e[i[0]].push(i[1])}}return e}();imacoach_init()